$(document).ready(function(){$.validator.addMethod("UserMobile",function(e,r){return this.optional(r)||e.match(/^[0-9,\)(+-]+$/)},"Please enter valid mobile number."),$("#loginform").validate({rules:{UserEmail:{required:!0,email:!0},UserPassword:{required:!0,minlength:6}},messages:{UserEmail:{required:"Please enter your email address.",email:"Your email address is invalid."},UserPassword:{required:"Please enter your password.",minlength:"Your password must be at least 6 characters long."}}}),$("#forgotform").validate({rules:{UserEmail:{required:!0,email:!0}},messages:{UserEmail:{required:"Please enter your email address.",email:"Your email address is invalid."}}}),$("#registerform").validate({rules:{UserFirstName:{required:!0},UserLastName:{required:!0},UserEmail:{required:!0,email:!0},UserMobile:{required:!0,minlength:6},UserPassword:{required:!0,minlength:6},UserConfirmPassword:{required:!0,minlength:6,equalTo:".UserPassword"}},messages:{UserFirstName:{required:"Please enter your first name."},UserLastName:{required:"Please enter your last name."},UserEmail:{required:"Please enter your email address.",email:"Your email address is invalid."},UserMobile:{required:"Please enter your mobile.",minlength:"Mobile number must at least 6 characters."},UserPassword:{required:"Please enter your password.",minlength:"Password must at least 6 characters."},UserConfirmPassword:{required:"Please enter your confirm password.",minlength:"Password must at least 6 characters.",equalTo:"These passwords don't match."}}}),$("#changepasswordform").validate({rules:{UserPassword:{required:!0,minlength:6},UserNewPassword:{required:!0,minlength:6},UserConfirmPassword:{required:!0,minlength:6,equalTo:".UserNewPassword"}},messages:{UserPassword:{required:"Please enter your password.",minlength:"Password must at least 6 characters."},UserNewPassword:{required:"Please enter new password.",minlength:"Password must at least 6 characters."},UserConfirmPassword:{required:"Please enter your confirm password.",minlength:"Password must at least 6 characters.",equalTo:"Confirm password doesn't match."}}}),$("#userprofile").validate({rules:{UserFirstName:{required:!0},UserLastName:{required:!0},UserEmail:{required:!0,email:!0},UserMobile:{required:!0,minlength:6,maxlength:15},UserDOB:{required:!0},UserGender:{required:!0},UserPostal:{required:!0},UserBio:{required:!0,maxlength:50}},messages:{UserFirstName:{required:"Please enter your first name."},UserLastName:{required:"Please enter your last name."},UserEmail:{required:"Please enter your email address.",email:"Your email address is invalid."},UserMobile:{required:"Please enter your mobile number.",minlength:"Mobile number must at least 6 characters.",maxlength:"Please enter valid mobile number."},UserDOB:{required:"Please enter your date of birth."},UserGender:{required:"Please select gender."},UserPostal:{required:"Please enter your postal code."},UserBio:{required:"Please enter your bio.",maxlength:"Maximum 50 characters allowed."}}}),$("#booking").validate({rules:{BookingSeats:{required:!0},PickUpAddress:{required:!0}},messages:{BookingSeats:{required:"Please enter booking seat."},PickUpAddress:{required:"Please enter pickup address."}},submitHandler:function(){var e,r=0,i=$("input[name='BookingSeats']").val();if($("input[name='StoperID']").each(function(){if($(this).is(":checked")){var t=$(this).attr("rel");e=$(this).data("address"),parseInt(i)>parseInt(t)&&($("#BookingSeats-error").show(),$("#BookingSeats-error").html("Please enter valid available seats."),$("html, body").animate({scrollTop:$(".pickup-options").offset().top},500),r+=1)}}),$("#pick_up").is(":checked")){var t=$("#pick_up").val();if(""==$(".input_hidden").val())$("#PickUpAddress").val(""),$("#PickUpAddress-error").show(),$("#PickUpAddress-error").html("Please select more specific location."),$("html, body").animate({scrollTop:$(".error").offset().top},500),r+=1;else{var a=$("input[name='PickUpAddress']").val();$.ajax({type:"POST",url:ajax_url+"journey/DistanceCalculate",async:!1,data:{selectedaddress:e,enteredaddress:a},success:function(e){parseInt(e)>parseInt(t)&&($("#PickUpCity").val(""),$("#PickUpAddress-error").show(),$("#PickUpAddress-error").html("Please select location with in "+t+" km"),r+=1)}})}}return 0==r?!0:!1}}),$("#step1").validate({rules:{RideFrequency:{required:!0},RideStartDate:{required:!0},RideStartDate_ot:{required:!0},RideStartTime:{required:!0},RideStartTime_ot:{required:!0},RideEndDate:{required:!0},DepartureState:{required:!0},DepartureAddress:{required:!0},DepartureDate:{required:!0},DepartureTime:{required:!0},ArrivalAddress:{required:!0},PickUpDistance:{required:!0,number:!0,min:0},PickUpFee:{required:!0,number:!0,min:0}},messages:{RideFrequency:{required:"Please select ride frequency."},RideStartDate:{required:"Please enter ride start date."},RideStartTime:{required:"Please enter ride start time."},RideStartDate_ot:{required:"Please enter ride start date."},RideStartTime_ot:{required:"Please enter ride start time."},RideEndDate:{required:"Please enter ride end date."},DepartureState:{required:"Please select state."},DepartureAddress:{required:"Please enter departure address."},DepartureDate:{required:"Please enter departure date."},DepartureTime:{required:"Please enter departure time."},ArrivalAddress:{required:"Please enter arrival address."},PickUpDistance:{required:"Please enter pickup distance.",number:"Please enter valid number.",min:"Please enter valid number."},PickUpFee:{required:"Please enter pickup fees.",number:"Please enter valid number.",min:"Please enter valid number."}},submitHandler:function(){var e=0;return $(".location").each(function(){if(""!=$(this).val()){if(""==$(this).parent().find(".input_hidden").val())return $(this).val(""),e++,$(this).parent().find(".error").css("display","block"),$(this).parent().find(".error").html("Please select more specific location."),$("html, body").animate({scrollTop:$(".error").offset().top},500),!1}else $(this).parent().find(".input_hidden").val("")}),0==e?!0:!1}});var e=0;$(".custom_valid").each(function(){if(e++,e>1)$("#addon-facilities-btn").show();else{var r=$("#facilites-type").val();r?$("#addon-facilities-btn").show():$("#addon-facilities-btn").hide()}}),$(document).on("change","#facilites-type",function(){var e=$("#facilites-type").val();e?$("#addon-facilities-btn").show():$("#addon-facilities-btn").hide()}),$("#step2").validate({ignore:".ignore,:hidden,.sRoute-p,.sRoute-d",rules:{VehicleYear:{required:!0},VehicleBrand:{required:!0},VehicleModel:{required:!0},VehicleComfort:{required:!0},userfile:{required:!0},VehicleColor:{required:!0},VehicleNumber:{required:!0},VehicleDetail:{required:{depends:function(){return $(this).val($(this).val().replace(/^\s/,"")),!0}},maxlength:75},MainRoutePrice:{required:!0,number:!0},MainRouteDistance:{required:!0,number:!0},"StoperRoutePrice[]":{required:!0,number:!0},"StoperRouteDistance[]":{required:!0,number:!0},Seats:{required:!0,number:!0,min:1},Luggage:{required:!0},Flexibility:{required:!0},Detour:{required:!0},RideDetails:{required:{depends:function(){return $(this).val($(this).val().replace(/^\s/,"")),!0}},maxlength:100}},messages:{VehicleYear:{required:"Please select vehicle year."},VehicleBrand:{required:"Please select vehicle brand."},VehicleModel:{required:"Please select vehicle model."},VehicleComfort:{required:"Please select comfort level."},userfile:{required:"Please select vehicle image."},VehicleColor:{required:"Please select vehicle colour."},VehicleNumber:{required:"Please enter vehicle number."},VehicleImage:{required:"Please select vehicle image."},VehicleDetail:{required:"Please enter vehicle details.",maxlength:"Character limit 75."},MainRoutePrice:{required:"Enter price.",number:"Enter price."},MainRouteDistance:{required:"Enter distance.",number:"Enter valid number."},"StoperRoutePrice[]":{required:"Enter price.",number:"Enter valid number."},"StoperRouteDistance[]":{required:"Enter distance.",number:"Enter valid number."},Seats:{required:"Please enter no. of seats.",number:"Please enter valid number.",min:"Please enter valid number."},Luggage:{required:"Please select luggage size."},Flexibility:{required:"Please select flexibility."},Detour:{required:"Please select detour."},RideDetails:{required:"Please enter ride details.",maxlength:"Character limit 100."}},submitHandler:function(){var e=0;$(".sRoute-p").each(function(){var r=$(this).val();if(r){if(isNaN(r))return $(this).next(".error").text("Enter valid number."),e++,!1;if(5>r)return $(this).next(".error").text("Enter price greater than 5."),e++,!1;$(this).next(".error").text("")}else e++,$(this).next(".error").text("Enter price.")});var r=0;if($(".sRoute-d").each(function(){var e=$(this).val();if(e){if(isNaN(e))return $(this).next(".error").text("Enter valid number."),r++,!1;$(this).next(".error").text("")}else r++,$(this).next(".error").text("Enter distance.")}),0!=e||0!=r)return $("html, body").animate({scrollTop:$(".main-label").offset().top},500),!1;var i=$("#facilites-type").val();if(!i)return $("#qty-custom").val(""),$("#addonfree").val(""),$("#addoncost").val(""),!0;if($(".facilities-type").hasClass("custom_valid")){var t=0;if($(".custom_valid").each(function(){var e=$(this).val();e?$(this).next(".addonT-error").text(""):(t++,$(this).next(".addonT-error").text("This field is required."))}),t>0)return $("html, body").animate({scrollTop:$(".main-label").offset().top},500),!1;var a=1}else var a=1;if($(".custom-field").hasClass("custom-qty")){var s=0;if($(".custom-qty").each(function(){var e=$(this).val();if(e){if(isNaN(e))return $(this).next(".addonT-error").text("Please enter valid number."),$("html, body").animate({scrollTop:$(".main-label").offset().top},500),!1;$(this).next(".addonT-error").text("")}else s++,$(this).next(".addonT-error").text("This field is required.")}),s>0)return $("html, body").animate({scrollTop:$(".main-label").offset().top},500),!1;var l=1}else var l=1;if($(".dropdown-toggle").hasClass("custom_freepaid")){var n=0;if($(".custom_freepaid").each(function(){var e=$(this).val();e?$(this).next(".addonT-error").text(""):($(this).next(".addonT-error").text("This field is required."),n++)}),n>0)return $("html, body").animate({scrollTop:$(".main-label").offset().top},500),!1;var o=1}else var o=1;if($(".custom-field").hasClass("validcost")){var d=0;if($(".validcost").each(function(){var e=$(this).val();e?isNaN(e)?($(this).next(".addonT-error").text("Please enter valid number."),d++):$(this).next(".addonT-error").text(""):(d++,$(this).next(".addonT-error").text("This field is required."))}),d>0)return $("html, body").animate({scrollTop:$(".main-label").offset().top},500),!1;var u=1}else var u=1;var r=0;return $(".sRoute-d").each(function(){var e=$(this).val();if(e){if(isNaN(e))return r++,$(this).next(".error").text("Enter valid number."),!1;$(this).next(".error").text("")}else r++,$(this).next(".error").text("Enter distance.")}),$("html, body").animate({scrollTop:$(".main-label").offset().top},500),1==a&&1==l&&1==o&&1==u&&0==e&&0==r?!0:void 0}}),$(document).on("change",".custom_freepaid",function(){var e=$(this).val();e?($(this).next(".addonT-error").text(""),"free"==e?($(this).parents(".addon-facilities").find(".custom_cost").prop("readonly",!0).removeClass("validcost").val(""),$(this).parents(".addon-facilities").find(".custom_cost").attr("value","")):$(this).parents(".addon-facilities").find(".custom_cost").prop("readonly",!1).addClass("validcost")):($(this).parents(".addon-facilities").find(".custom_cost").prop("readonly",!1).removeClass("validcost"),$(this).next(".addonT-error").text("This field is required."))});var r=$("#facilites-type").val();r&&($(document).on("change",".facilities-type",function(){var e=$(this).val();$(this).next(".addonT-error").text(e?"":"This field is required.")}),$(document).on("change",".custom_freepaid",function(){var e=$(this).val();e?($(this).next(".addonT-error").text(""),"free"==e?($(this).parents(".addon-facilities").find(".custom_cost").prop("readonly",!0).removeClass("validcost").val(""),console.log($(this).parents(".addon-facilities").find(".custom_cost")),$(this).parents(".addon-facilities").find(".custom_cost").attr("value","")):$(this).parents(".addon-facilities").find(".custom_cost").prop("readonly",!1).addClass("validcost")):($(this).parents(".addon-facilities").find(".custom_cost").prop("readonly",!1).removeClass("validcost"),$(this).next(".addonT-error").text("This field is required."))}),$(document).on("change",".custom-qty",function(){var e=$(this).val();if(e){if(isNaN(e))return $(this).next(".addonT-error").text("Please enter valid number."),!1;$(this).next(".addonT-error").text("")}else $(this).next(".addonT-error").text("This field is required.")}),$(document).on("change",".validcost",function(){var e=$(this).val();if(e){if(isNaN(e))return $(this).next(".addonT-error").text("Please enter valid number."),!1;$(this).next(".addonT-error").text("")}else $(this).next(".addonT-error").text("This field is required.")})),$("#step3").validate({rules:{PaypalEmail:{required:!0,email:!0},BankName:{required:!0},AccountNo:{required:!0},FullName:{required:!0},InstitutionNo:{required:!0},Branch:{required:!0}},messages:{PaypalEmail:{required:"Please enter your paypal email."},BankName:{required:"Please enter your bank name."},AccountNo:{required:"Please enter your account number."},FullName:{required:"Please enter your full name."},InstitutionNo:{required:"Please enter your institution number."},Branch:{required:"Please enter your transist or branch number."}}}),$("#create-ride-alert").validate({rules:{Departure:{required:!0},Destination:{required:!0},TravelDate:{required:!0},Email:{required:!0,email:!0}},messages:{Departure:{required:"Please enter departure address."},Destination:{required:"Please enter destination address."},TravelDate:{required:"Please select your travel date."},Email:{required:"Please enter your email address.",email:"Please enter a valid email address."}}}),$("#edit-ride-alert").validate({rules:{Departure:{required:!0},Destination:{required:!0},TravelDate:{required:!0},Email:{required:!0,email:!0}},messages:{Departure:{required:"Please enter departure address."},Destination:{required:"Please enter destination address."},TravelDate:{required:"Please select your travel date."},Email:{required:"Please enter your email address.",email:"Please enter a valid email address."}}}),$("#add-vehicles").validate({rules:{VehicleType:{required:!0},VehicleYear:{required:!0},VehicleBrand:{required:!0},VehicleModel:{required:!0},VehicleComfort:{required:!0},VehicleImage:{required:!0},VehicleColor:{required:!0},VehicleNumber:{required:!0},VehicleDetail:{required:{depends:function(){return $(this).val($(this).val().replace(/^\s/,"")),!0}},maxlength:300}},messages:{VehicleType:{required:"Please select vehicle type."},VehicleYear:{required:"Please select vehicle year."},VehicleBrand:{required:"Please select vehicle brand."},VehicleModel:{required:"Please select vehicle model."},VehicleComfort:{required:"Please select comfort level."},VehicleImage:{required:"Please select vehicle image."},VehicleColor:{required:"Please select vehicle colour."},VehicleNumber:{required:"Please enter vehicle number."},VehicleDetail:{required:"Please enter vehicle details.",maxlength:"Character limit 300."}},submitHandler:function(){$(".vehicle-submit-btn").attr("type","button");var e=$("#vehicle-image-profile").prop("files")[0],r=new FormData;r.append("userfile",e);var i=$("#add-vehicles").serializeArray();return $.each(i,function(e,i){r.append(i.name,i.value)}),$.ajax({type:"POST",url:$("#add-vehicles").attr("action"),data:r,dataType:"json",cache:!1,contentType:!1,processData:!1,success:function(e){"error"==e.status?($("#uploadFile-error").css("display","block"),$("#uploadFile-error").html(e.message),$(".vehicle-submit-btn").attr("type","submit")):location.reload()}}),!1}}),$("#edit-vehicles").validate({rules:{VehicleType:{required:!0},VehicleYear:{required:!0},VehicleBrand:{required:!0},VehicleModel:{required:!0},VehicleComfort:{required:!0},VehicleImage:{required:!0},VehicleColor:{required:!0},VehicleNumber:{required:!0},VehicleDetail:{required:{depends:function(){return $(this).val($(this).val().replace(/^\s/,"")),!0}},maxlength:300}},messages:{VehicleType:{required:"Please select vehicle type."},VehicleYear:{required:"Please select vehicle year."},VehicleBrand:{required:"Please select vehicle brand."},VehicleModel:{required:"Please select vehicle model."},VehicleComfort:{required:"Please select comfort level."},VehicleImage:{required:"Please select vehicle image."},VehicleColor:{required:"Please select vehicle colour."},VehicleNumber:{required:"Please enter vehicle number."},VehicleDetail:{required:"Please enter vehicle details.",maxlength:"Character limit 300."}},submitHandler:function(){$(".vehicle-submit-btn").attr("type","button");var e=$("#vehicle-image-profile-edit").prop("files")[0],r=new FormData;r.append("userfile",e);var i=$("#edit-vehicles").serializeArray();return $.each(i,function(e,i){r.append(i.name,i.value)}),$.ajax({type:"POST",url:$("#edit-vehicles").attr("action"),data:r,dataType:"json",cache:!1,contentType:!1,processData:!1,success:function(e){"error"==e.status?($("#uploadFileEdit-error").css("display","block"),$("#uploadFileEdit-error").html(e.message),$(".vehicle-submit-btn").attr("type","submit")):location.reload()}}),!1}}),$("#user-facilities").validate(),$("select.facilites-type").each(function(){$(this).rules("add",{required:!0,messages:{required:"Please select facility."}})}),$(".facility-qty").each(function(){$(this).rules("add",{required:!0,messages:{required:"Enter quantity."}}),$(this).rules("add",{min:1,messages:{min:"Enter valid quantity."}}),$(this).rules("add",{number:!0,messages:{number:"Enter valid quantity."}})}),$("select.facility-mode").each(function(){$(this).rules("add",{required:!0,messages:{required:"This field is required."}})}),$(document).on("change",".facility-mode",function(){"paid"==$(this).val()?($(this).parents(".paid-1").siblings(".cost_1").find(".facility-cost").rules("add",{required:!0,messages:{required:"Please enter cost."}}),$(this).parents(".paid-1").siblings(".cost_1").find(".facility-cost").rules("add",{min:0,messages:{min:"Enter valid cost."}}),$(this).parents(".paid-1").siblings(".cost_1").find(".facility-cost").rules("add",{number:!0,messages:{number:"Enter valid cost."}})):$(this).parents(".paid-1").siblings(".cost_1").find(".facility-cost").next().remove()}),$("#simple-search").validate({rules:{startingFrom:{required:!0},goingTo:{required:!0}},messages:{startingFrom:{required:"Please enter start location."},goingTo:{required:"Please enter going location."}},submitHandler:function(){var e=0;""==$("#startCity").val()?($("#StartLocation-error").show(),$("#StartLocation-error").text("Please select location from dropdown list."),e++):($("#StartLocation-error").hide(),$("#StartLocation-error").text(""));var r=0;return""==$("#goingCity").val()?($("#EndLocation-error").show(),$("#EndLocation-error").text("Please select location from dropdown list."),r++):($("#EndLocation-error").hide(),$("#EndLocation-error").text("")),0==e&&0==r?!0:!1}}),$("#ask-question-form").validate({rules:{Title:{required:!0},Text:{required:!0}},messages:{Title:{required:"Please enter question title."},Text:{required:"Please enter question description."}}}),$("#leave-feedback-form").validate({rules:{Title:{required:!0},Text:{required:!0}},messages:{Title:{required:"Please enter your feedback title."},Text:{required:"Please enter your feedback description."}}}),$("#mobile_verification_form").validate({rules:{UserMobile:{required:!0,minlength:6},UserMobileCode:{required:!0}},messages:{UserMobile:{required:"Please enter your mobile.",minlength:"Mobile number must at least 6 characters."},UserMobileCode:{required:"Please enter OTP."}},submitHandler:function(){return $.ajax({type:"POST",data:$("#mobile_verification_form").serialize(),url:ajax_url+"profile/mobile_verify",dataType:"json",success:function(e){"F"==e.response?"mobile"==e.field?($("#UserMobile-error").show(),$("#UserMobile-error").html(e.message)):($("#UserMobileCode-error").show(),$("#UserMobileCode-error").html(e.message)):($("#phone_verified").show(),$("#verified_number").html(e.message),$("#phone_not_verified").hide(),$("#MobileVerifcation .close").trigger("click"))}}),!1}}),$("#otp_verification_form").validate({rules:{BookingOTP:{required:!0}},messages:{BookingOTP:{required:"Please enter booking OTP."}},submitHandler:function(){return $.ajax({type:"POST",data:$("#otp_verification_form").serialize(),url:ajax_url+"ride/verifyOTP",dataType:"json",success:function(e){"F"==e.response?($('input[name="BookingOTP"]').val(""),$("#BookingOTP-error").show(),$("#BookingOTP-error").html(e.message)):($('input[name="BookingOTP"]').val(""),$("#OTPVerifcation .close").trigger("click"),$(".show-otp-button-"+e.BookingID).css("display","none"),$("#book-r-"+e.BookingID).html("Ongoing"),$("#finish-r-"+e.BookingID).show(),$("#cancel-r-"+e.BookingID).hide())}}),!1}}),$("#referral_form").validate({rules:{ReferEmail:{required:!0,email:!0}},messages:{ReferEmail:{required:"Please enter email address.",email:"Your email address is invalid."}},submitHandler:function(e){return $.ajax({type:"POST",data:$("#referral_form").serialize(),url:ajax_url+"profile/refer_friend",dataType:"json",success:function(r){"F"==r.response?($("#ReferEmail-error").show(),$("#ReferEmail-error").css("color","#ff0000"),$("#ReferEmail-error").html(r.message)):($("#ReferEmail-error").show(),$("#ReferEmail-error").css("color","#98C358"),$("#ReferEmail-error").html(r.message),$('input[name="ReferEmail"]',e).val(""))}}),!1}}),$("#login_referal_form").validate({rules:{UserEnterCode:{required:!0}},messages:{UserEnterCode:{required:"Please enter referral code."}}}),$("#newslettersubscribe").validate({rules:{Email:{required:!0,email:!0}},messages:{Email:{required:"Please enter your email address.",email:"Your email address is invalid."}},submitHandler:function(){return $.ajax({type:"POST",data:$("#newslettersubscribe").serialize(),url:ajax_url+"home/newslettersubscribe",success:function(e){$("#Email-error").css("display","block"),$("#Email-error").html(e)}}),!1}})});